<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout & Routine Manager</title>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-white min-h-screen">
    <!-- Thin black banner with right-aligned buttons -->
    <header class="bg-black text-white" style="height:42px;">
        <div class="container mx-auto h-full flex items-center justify-between px-4">
            <div class="flex items-center">
                <a href="/" class="text-sm font-semibold px-3 py-1 border border-white rounded">ARCHIVE</a>
            </div>
            <div class="flex items-center">
                <a href="/register" class="text-sm font-semibold px-3 py-1 border border-white rounded ml-2">REGISTER</a>
                <a href="/signin" class="text-sm font-semibold px-3 py-1 border border-white rounded ml-2">ACCOUNT</a>
            </div>
        </div>
    </header>

    <!-- Landing area with photo tiles - fills viewport below header -->
    <main id="tiles-container" class="w-full" style="height: calc(100vh - 42px);">
        <div id="tiles" class="w-full h-full grid gap-0" style="grid-auto-rows: 1fr; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));">
            <!-- tiles will be generated by JS to exactly fill the available grid (rows x cols) -->
        </div>
    </main>

    <script>
        (function() {
            const container = document.getElementById('tiles');

            function computeAndFill() {
                // Clear existing tiles
                container.innerHTML = '';

                const containerRect = container.getBoundingClientRect();
                const headerHeight = document.querySelector('header').getBoundingClientRect().height || 42;
                const availableHeight = window.innerHeight - headerHeight;

                // Read computed columns from CSS grid
                const style = getComputedStyle(container);
                const cols = style.gridTemplateColumns.split(' ').length;

                // Tile width is container width / cols
                const tileWidth = containerRect.width / cols;
                // Number of rows needed to fill vertically
                const rows = Math.ceil(availableHeight / tileWidth);

                const total = rows * cols;

                for (let i = 0; i < total; i++) {
                    const shade = ["#f3f4f6","#e5e7eb","#d1d5db","#9ca3af","#6b7280"][i % 5];
                    const tile = document.createElement('div');
                    tile.className = 'group relative overflow-hidden';
                    tile.style.backgroundColor = shade;
                    tile.style.aspectRatio = '1 / 1';
                    tile.style.display = 'flex';
                    tile.style.alignItems = 'center';
                    tile.style.justifyContent = 'center';

                    const overlay = document.createElement('div');
                    overlay.className = 'absolute inset-0';
                    overlay.style.background = 'rgba(0,0,0,0)';
                    overlay.style.transition = 'background 200ms';
                    tile.appendChild(overlay);

                    const content = document.createElement('div');
                    content.className = 'absolute inset-0 flex flex-col items-center justify-center';
                    content.style.opacity = '0';
                    content.style.transition = 'opacity 200ms';
                    content.style.color = 'white';

                    const title = document.createElement('div');
                    title.textContent = 'RECORD';
                    title.style.fontWeight = '700';
                    title.style.fontSize = '1rem';
                    content.appendChild(title);

                    const btn = document.createElement('button');
                    btn.textContent = 'INFO';
                    btn.style.marginTop = '8px';
                    btn.className = 'bg-white text-black px-3 py-1 rounded';
                    content.appendChild(btn);

                    tile.appendChild(content);

                    // Hover handlers for non-Tailwind fallback
                    tile.addEventListener('mouseenter', () => {
                        overlay.style.background = 'rgba(0,0,0,0.5)';
                        content.style.opacity = '1';
                    });
                    tile.addEventListener('mouseleave', () => {
                        overlay.style.background = 'rgba(0,0,0,0)';
                        content.style.opacity = '0';
                    });

                    container.appendChild(tile);
                }
            }

            // Recompute on load and resize
            window.addEventListener('load', computeAndFill);
            window.addEventListener('resize', () => {
                // debounce
                clearTimeout(window.__tileResize);
                window.__tileResize = setTimeout(computeAndFill, 120);
            });
        })();
    </script>
</body>
</html>